(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{6812:function(t,e,a){"use strict";a("d4c4")},b4aa:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-sm"},[a("div",{staticClass:"q-pa-md"},[a("q-card",[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"info",label:"Personal Information"}}),a("q-tab",{attrs:{name:"history",label:"Logs"}})],1),a("q-separator"),a("q-dialog",{attrs:{"transition-show":"scale"},model:{value:t.uploadImageModal,callback:function(e){t.uploadImageModal=e},expression:"uploadImageModal"}},[a("q-uploader",{staticStyle:{height:"40%",width:"30%","object-fit":"contain"},attrs:{disable:t.isLoading,label:"Restricted to images",factory:t.uploadImage,accept:".jpg, image/*"},on:{rejected:t.onRejected}})],1),a("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"info"}},[a("q-stepper",{ref:"stepper",attrs:{color:"primary",animated:""},scopedSlots:t._u([{key:"navigation",fn:function(){return[a("q-stepper-navigation",[1===t.step?a("q-btn",{attrs:{color:"primary",label:"Next"},on:{click:function(e){return t.proceed()}}}):t._e(),t.step>1?a("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Back"},on:{click:function(e){return t.$refs.stepper.previous()}}}):t._e(),!0===t.hasInfoUpdate?a("q-btn",{staticClass:"q-ml-sm",attrs:{color:"blue",label:"Update"},on:{click:function(e){return t.updatePatient()}}}):t._e(),a("q-btn",{staticStyle:{float:"right"},attrs:{color:"red",label:"Back to Patients"},on:{click:function(e){return t.backToPatients()}}})],1)]},proxy:!0}]),model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[a("q-step",{attrs:{name:1,title:"Patient Information",icon:"settings",done:t.step>1}},[a("div",{staticClass:"q-gutter-md row items-start"},[a("q-img",{staticStyle:{height:"25%",width:"30%","object-fit":"contain"},attrs:{src:t.patient.profile}})],1),a("div",{staticClass:"q-gutter-md row items-start",staticStyle:{"padding-top":"3%","padding-left":"20px"}},[a("q-btn",{staticStyle:{height:"56px",width:"120px"},attrs:{color:"primary",label:"Upload"},nativeOn:{click:function(e){t.uploadImageModal=!0}}})],1),a("q-card-section",[a("q-form",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{filled:"",label:"Your name *",hint:"Name and surname","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.patient.name,callback:function(e){t.$set(t.patient,"name",e)},expression:"patient.name"}}),a("q-input",{attrs:{filled:"",label:"Your email *",hint:"Example: johndoe@gmail.com","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.patient.email,callback:function(e){t.$set(t.patient,"email",e)},expression:"patient.email"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"block",staticStyle:{"margin-right":"9%",width:"30%"}},[a("q-select",{attrs:{options:t.genders,label:"Gender *"},model:{value:t.patient.gender,callback:function(e){t.$set(t.patient,"gender",e)},expression:"patient.gender"}})],1),a("div",{staticClass:"block",staticStyle:{"margin-right":"9%",width:"30%"}},[a("q-input",{attrs:{filled:"",mask:"date",rules:["date"],label:"Birthdate *"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{model:{value:t.patient.birth_date,callback:function(e){t.$set(t.patient,"birth_date",e)},expression:"patient.birth_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.patient.birth_date,callback:function(e){t.$set(t.patient,"birth_date",e)},expression:"patient.birth_date"}})],1)]),a("q-input",{attrs:{filled:"",label:"Civil Status *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.patient.civil_status,callback:function(e){t.$set(t.patient,"civil_status",e)},expression:"patient.civil_status"}}),a("q-input",{attrs:{filled:"",label:"Phone Number *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.patient.phone_number,callback:function(e){t.$set(t.patient,"phone_number",e)},expression:"patient.phone_number"}}),a("q-input",{attrs:{filled:"",label:"Mobile Number *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.patient.mobile_number,callback:function(e){t.$set(t.patient,"mobile_number",e)},expression:"patient.mobile_number"}})],1)],1)],1),a("q-step",{attrs:{name:2,title:"Patient Address",icon:"home",done:t.step>2}},[a("q-card-section",[a("q-form",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{filled:"",label:"Street Address *",hint:"#14 unit 421 Tiny Street","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.patient.street_address,callback:function(e){t.$set(t.patient,"street_address",e)},expression:"patient.street_address"}}),a("q-input",{attrs:{filled:"",label:"Barangay *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.patient.barangay,callback:function(e){t.$set(t.patient,"barangay",e)},expression:"patient.barangay"}}),a("q-input",{attrs:{filled:"",label:"City *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.patient.city,callback:function(e){t.$set(t.patient,"city",e)},expression:"patient.city"}}),a("q-input",{attrs:{filled:"",label:"Province *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.patient.province,callback:function(e){t.$set(t.patient,"province",e)},expression:"patient.province"}})],1)],1)],1)],1),a("q-inner-loading",{attrs:{showing:t.isLoading}},[a("q-spinner-grid",{attrs:{size:"200px",color:"pink"}})],1)],1),a("q-tab-panel",{attrs:{name:"history"}},[a("div",{staticClass:"text-h6"},[t._v("Patient Visits")]),a("patient-visits",{attrs:{"patient-visits":t.patientVisits,"is-loading":t.isPatientVisitLoading}})],1)],1)],1),a("q-dialog",{attrs:{"transition-show":"scale"},model:{value:t.patientError,callback:function(e){t.patientError=e},expression:"patientError"}},[a("q-card",{staticClass:"bg-red-4 text-white",staticStyle:{width:"300px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Error")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("ul",t._l(t.errorMessages,(function(e){return a("li",{key:e},[t._v("\n            "+t._s(e)+"\n          ")])})),0)]),a("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"}})],1)],1)],1)],1)])},n=[],s=(a("caad"),a("13d5"),a("4fad"),a("d3b7"),a("07ac"),a("e6cf"),a("2532"),a("278c")),r=a.n(s),o=a("ded3"),l=a.n(o),p=a("b05d"),c=(a("2a19"),{setup:function(){var t=p["a"];function e(e){t.notify({type:"negative",message:"".concat(e.length," file(s) did not pass validation constraints")})}return{onRejected:e}},name:"Patient",components:{PatientVisits:function(){return a.e(71).then(a.bind(null,"a515"))}},data:function(){return{errorMessages:[],isLoading:!1,isPatientVisitLoading:!1,genders:["Male","Female","Others"],patient:{loaded:!1},patientVisits:[],patientError:!1,originalDataPatient:null,profilePicture:null,step:1,tab:"info",hasInfoUpdate:!1,uploadImageModal:!1}},created:function(){var t=this.$route.params.patient_code;this.fetchPatient(t),this.fetchPatientVisits(t)},computed:{},watch:{patient:{handler:function(t){var e=this;if(void 0!==t){var a=l()(l()({},this.originalDataPatient),t),i=Object.entries(a).reduce((function(a,i){var n=r()(i,2),s=n[0],o=n[1];return!0!==e.patient.loaded||Object.values(t).includes(o)&&Object.values(e.originalDataPatient).includes(o)||(a[s]=o),a}),{});this.hasInfoUpdate=JSON.stringify(i)!==JSON.stringify({})}},deep:!0,immediate:!0}},methods:{backToPatients:function(){this.$router.push({name:"patients"})},onRejected:function(t){p["a"].notify({type:"negative",message:"".concat(t.length," file(s) did not pass validation constraints")})},proceed:function(){var t=this;3!==this.step?this.$refs.stepper.next():(this.isLoading=!0,this.errorMessages=[],this.$store.dispatch("patients/add",this.user_details).then((function(e){t.isLoading=!1,401===e.status?t.$router.push("/UsersAdmin"):e.status>200?(t.processError(e.data),t.step=1,t.patient=t.originalDataPatient):t.hasInfoUpdate=!1})))},updatePatient:function(){var t=this;this.isLoading=!0,this.errorMessages=[],this.$store.dispatch("patients/update",this.patient).then((function(e){t.isLoading=!1,401===e.status?t.$router.push("/UsersAdmin"):e.status>200?(t.processError(e.data),t.step=1):(t.initiatePatient(e.data),t.cancel())}))},fetchPatientVisits:function(t){var e=this;this.isPatientVisitLoading=!0,this.$store.dispatch("patients/patientVisitsByPatient",t).then((function(t){e.isPatientVisitLoading=!1,401===t.status?e.$router.push("/UsersAdmin"):404===t.status?e.backToPatients():null!==t.data&&(e.patientVisits=t.data)}))},fetchPatient:function(t){var e=this;this.isLoading=!0,this.$store.dispatch("patients/patientInfo",t).then((function(t){e.isLoading=!1,401===t.status?e.$router.push("/UsersAdmin"):404===t.status?e.backToPatients():null!==t.data&&e.initiatePatient(t.data)}))},initiatePatient:function(t){this.patient=t,this.patient.loaded=!0,null===this.patient.profile_picture||""===this.patient.profile_picture?this.patient.profile="https://www.pngitem.com/pimgs/m/111-1114675_user-login-person-man-enter-person-login-icon.png":this.patient.profile="http://localhost/"+this.patient.profile_picture,this.originalDataPatient=JSON.parse(JSON.stringify(this.patient))},processError:function(t){for(var e in t){var a=t[e];for(var i in a)this.errorMessages.push(a[i])}this.patientError=!0},uploadImage:function(t){var e=this,a=this.$route.params.patient_code;this.isLoading=!0;var i=new FormData;i.append("image",t[0]),i.append("patient_code",a),this.$store.dispatch("patients/updateImage",i).then((function(t){401===t.status?(e.$router.push("/UsersAdmin"),e.isLoading=!1):t.status>200?(e.isLoading=!1,e.processError(t.data),e.step=1):(e.isLoading=!1,e.initiatePatient(t.data),e.uploadImageModal=!1)}))}}}),d=c,u=(a("6812"),a("2877")),h=a("9989"),m=a("f09f"),f=a("429b"),g=a("7460"),b=a("eb85"),v=a("24e8"),y=a("ee89"),q=a("adad"),P=a("823b"),_=a("f531"),k=a("87fe"),x=a("068f"),w=a("9c40"),$=a("a370"),C=a("0378"),Q=a("27f9"),S=a("ddd8"),I=a("0016"),L=a("7cbe"),j=a("52ee"),M=a("b19c"),E=a("74f7"),U=a("981c"),V=a("4b7e"),N=a("7f67"),O=a("eebe"),z=a.n(O),D=Object(u["a"])(d,i,n,!1,null,"b84cbc58",null);e["default"]=D.exports;z()(D,"components",{QPage:h["a"],QCard:m["a"],QTabs:f["a"],QTab:g["a"],QSeparator:b["a"],QDialog:v["a"],QUploader:y["a"],QTabPanels:q["a"],QTabPanel:P["a"],QStepper:_["a"],QStep:k["a"],QImg:x["a"],QBtn:w["a"],QCardSection:$["a"],QForm:C["a"],QInput:Q["a"],QSelect:S["a"],QIcon:I["a"],QPopupProxy:L["a"],QDate:j["a"],QStepperNavigation:M["a"],QInnerLoading:E["a"],QSpinnerGrid:U["a"],QCardActions:V["a"]}),z()(D,"directives",{ClosePopup:N["a"]})},d4c4:function(t,e,a){}}]);