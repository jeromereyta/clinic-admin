(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{"1ad2":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("q-card",[s("q-stepper",{ref:"stepper",attrs:{color:"primary",animated:""},scopedSlots:t._u([{key:"navigation",fn:function(){return[s("q-stepper-navigation",[s("q-btn",{attrs:{color:"primary",label:3===t.step?"Admit Patient":"Continue"},on:{click:function(e){return t.proceed()}}}),t.step>1?s("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Back"},on:{click:function(e){return t.$refs.stepper.previous()}}}):t._e(),s("q-btn",{staticClass:"q-ml-sm",staticStyle:{float:"right"},attrs:{flat:"",color:"red",label:"Back to Homepage"},on:{click:function(e){return t.$router.push("/")}}})],1)]},proxy:!0}]),model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[s("q-step",{attrs:{color:"green",name:1,title:"Patient Information",icon:"settings",done:t.step>1}},[s("div",{staticClass:"text-h6 text-grey-8"},[t._v("\n            Patient Details\n          ")]),s("q-card-section",[s("q-form",{staticClass:"q-gutter-md"},[s("q-input",{attrs:{filled:"",disable:t.patientInfoDisabled,label:"Your name *",hint:"Name and surname","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.name,callback:function(e){t.$set(t.user_details,"name",e)},expression:"user_details.name"}}),s("q-input",{attrs:{filled:"",disable:t.patientInfoDisabled,label:"Your email *",hint:"Example: johndoe@gmail.com","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.email,callback:function(e){t.$set(t.user_details,"email",e)},expression:"user_details.email"}}),s("div",{staticClass:"row"},[s("div",{staticClass:"block",staticStyle:{"margin-right":"9%",width:"30%"}},[s("q-select",{attrs:{disable:t.patientInfoDisabled,options:t.genders,label:"Gender *"},model:{value:t.user_details.gender,callback:function(e){t.$set(t.user_details,"gender",e)},expression:"user_details.gender"}})],1),s("div",{staticClass:"block",staticStyle:{"margin-right":"9%",width:"30%"}},[s("q-input",{attrs:{disable:t.patientInfoDisabled,filled:"",mask:"date",rules:["date"],label:"Birthdate *"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{disable:t.patientInfoDisabled},model:{value:t.user_details.birth_date,callback:function(e){t.$set(t.user_details,"birth_date",e)},expression:"user_details.birth_date"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.user_details.birth_date,callback:function(e){t.$set(t.user_details,"birth_date",e)},expression:"user_details.birth_date"}})],1)]),s("q-input",{attrs:{filled:"",disable:t.patientInfoDisabled,label:"Civil Status *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.civil_status,callback:function(e){t.$set(t.user_details,"civil_status",e)},expression:"user_details.civil_status"}}),s("q-input",{attrs:{filled:"",disable:t.patientInfoDisabled,label:"Phone Number *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.phone_number,callback:function(e){t.$set(t.user_details,"phone_number",e)},expression:"user_details.phone_number"}}),s("q-input",{attrs:{filled:"",disable:t.patientInfoDisabled,label:"Mobile Number *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.mobile_number,callback:function(e){t.$set(t.user_details,"mobile_number",e)},expression:"user_details.mobile_number"}})],1)],1)],1),s("q-step",{attrs:{color:"blue",name:2,title:"Patient Address",icon:"home",done:t.step>2}},[s("div",{staticClass:"text-h6 text-grey-8"},[t._v("\n            Patient Address\n          ")]),s("q-card-section",[s("q-form",{staticClass:"q-gutter-md"},[s("q-input",{attrs:{filled:"",disable:t.patientInfoDisabled,label:"Street Address *",hint:"#14 unit 421 Tiny Street","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.street_address,callback:function(e){t.$set(t.user_details,"street_address",e)},expression:"user_details.street_address"}}),s("q-input",{attrs:{filled:"",disable:t.patientInfoDisabled,label:"Barangay *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.barangay,callback:function(e){t.$set(t.user_details,"barangay",e)},expression:"user_details.barangay"}}),s("q-input",{attrs:{filled:"",disable:t.patientInfoDisabled,label:"City *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.city,callback:function(e){t.$set(t.user_details,"city",e)},expression:"user_details.city"}}),s("q-input",{attrs:{filled:"",disable:t.patientInfoDisabled,label:"Province *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.province,callback:function(e){t.$set(t.user_details,"province",e)},expression:"user_details.province"}})],1)],1)],1),s("q-step",{attrs:{color:"yellow",name:3,title:"Patient Initial Visit Checkup",icon:"fact_check",done:t.step>3}},[s("div",{staticClass:"text-h6 text-grey-8"},[t._v("\n            Patient Visit Logs\n          ")]),s("q-card-section",[s("q-form",{staticClass:"q-gutter-md"},[s("q-input",{attrs:{filled:"",disable:t.patientVisitInfoDisabled,label:"Attending Doctor *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.attending_doctor,callback:function(e){t.$set(t.user_details,"attending_doctor",e)},expression:"user_details.attending_doctor"}}),s("q-input",{attrs:{filled:"",disable:t.patientVisitInfoDisabled,label:"Patient BP *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.patient_bp,callback:function(e){t.$set(t.user_details,"patient_bp",e)},expression:"user_details.patient_bp"}}),s("q-input",{attrs:{filled:"",disable:t.patientVisitInfoDisabled,label:"Height *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.patient_height,callback:function(e){t.$set(t.user_details,"patient_height",e)},expression:"user_details.patient_height"}}),s("q-input",{attrs:{filled:"",disable:t.patientVisitInfoDisabled,label:"Weight *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.patient_weight,callback:function(e){t.$set(t.user_details,"patient_weight",e)},expression:"user_details.patient_weight"}}),s("q-input",{attrs:{filled:"",disable:t.patientVisitInfoDisabled,label:"Remarks *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user_details.remarks,callback:function(e){t.$set(t.user_details,"remarks",e)},expression:"user_details.remarks"}})],1)],1)],1)],1),s("q-inner-loading",{attrs:{showing:t.isLoading}},[s("q-spinner-grid",{attrs:{size:"200px",color:"pink"}})],1),s("q-dialog",{attrs:{"transition-show":"scale"},model:{value:t.patientError,callback:function(e){t.patientError=e},expression:"patientError"}},[s("q-card",{staticClass:"bg-red-4 text-white",staticStyle:{width:"300px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Error")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("ul",t._l(t.errorMessages,(function(e){return s("li",{key:e},[t._v("\n                "+t._s(e)+"\n              ")])})),0)]),s("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"}})],1)],1)],1),s("q-dialog",{attrs:{"transition-show":"scale"},model:{value:t.patientSuccess,callback:function(e){t.patientSuccess=e},expression:"patientSuccess"}},[s("q-card",{staticClass:"bg-green-4 text-white",staticStyle:{width:"400px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("\n              Patient information created")])]),s("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"}})],1)],1)],1),s("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.patientCreating,callback:function(e){t.patientCreating=e},expression:"patientCreating"}},[s("q-card",{staticClass:"bg-white text-pink-4",staticStyle:{width:"600px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("\n              Patient information being creating\n            ")]),s("q-spinner-grid",{attrs:{color:"pink",size:"7em"}}),s("q-tooltip",{attrs:{offset:[0,8]}},[t._v("Processing")])],1)],1)],1)],1)],1)},a=[],n={name:"AdmitPatient",data:function(){return{errorMessages:[],genders:["Male","Female","Others"],isLoading:!1,patientCreating:!1,patientError:!1,patientInfoDisabled:!1,patientSuccess:!1,patientVisitInfoDisabled:!1,patient_visit:{},selectedPatient:null,step:1,user_details:{birth_date:"1990/01/01"}}},created:function(){null!==this.patientCode&&""!==this.patientCode&&(this.patientInfoDisabled=!0,this.fetchPatient(this.patientCode))},computed:{patientCode:function(){var t;return null!==(t=this.$route.query.patientCode)&&void 0!==t?t:null}},methods:{createPatientOrVisit:function(){null===this.patientCode?this.createPatientWithVisit():this.createPatientVisit()},createPatientWithVisit:function(){var t=this;this.patientCreating=!0,this.errorMessages=[],this.$store.dispatch("patients/add",this.user_details).then((function(e){t.patientCreating=!1,401===e.status?t.$router.push("/UsersAdmin"):e.status>200?(t.processError(e.data),t.step=1):t.$router.push({name:"patient-visit",params:{patient_visit_id:e.data.patient_visit.id}})}))},createPatientVisit:function(){var t,e=this,s=null!==(t=this.patient_visit.id)&&void 0!==t?t:null;if(null===s){this.patientCreating=!0;var i={patient_code:this.patientCode,attending_doctor:this.user_details.attending_doctor,patient_bp:this.user_details.patient_bp,patient_height:this.user_details.patient_height,patient_weight:this.user_details.patient_weight,remarks:this.user_details.remarks};this.errorMessages=[],this.$store.dispatch("patients/addPatientVisit",i).then((function(t){e.patientCreating=!1,401===t.status?e.$router.push("/UsersAdmin"):t.status>201?e.processError(t.data):e.$router.push({name:"patient-visit",params:{patient_visit_id:t.data.id}})}))}},fetchPatient:function(t){var e=this;this.isLoading=!0,this.$store.dispatch("patients/patientInfo",t).then((function(t){e.isLoading=!1,401===t.status?e.$router.push("/UsersAdmin"):404===t.status||null!==t.data&&(e.user_details=t.data)}))},proceed:function(){if(3===this.step){var t,e=null!==(t=this.patient_visit.id)&&void 0!==t?t:null;null===e?this.createPatientOrVisit():this.$refs.stepper.next()}else 5!==this.step&&this.$refs.stepper.next()},processError:function(t){for(var e in t){var s=t[e];for(var i in s)this.errorMessages.push(s[i])}this.patientError=!0}}},r=n,l=s("2877"),o=s("9989"),d=s("f09f"),u=s("f531"),c=s("87fe"),p=s("a370"),h=s("0378"),b=s("27f9"),f=s("ddd8"),_=s("0016"),m=s("7cbe"),g=s("52ee"),v=s("9c40"),q=s("b19c"),y=s("74f7"),x=s("981c"),C=s("24e8"),k=s("4b7e"),P=s("05c0"),w=s("7f67"),$=s("eebe"),I=s.n($),D=Object(l["a"])(r,i,a,!1,null,"64740b3d",null);e["default"]=D.exports;I()(D,"components",{QPage:o["a"],QCard:d["a"],QStepper:u["a"],QStep:c["a"],QCardSection:p["a"],QForm:h["a"],QInput:b["a"],QSelect:f["a"],QIcon:_["a"],QPopupProxy:m["a"],QDate:g["a"],QBtn:v["a"],QStepperNavigation:q["a"],QInnerLoading:y["a"],QSpinnerGrid:x["a"],QDialog:C["a"],QCardActions:k["a"],QTooltip:P["a"]}),I()(D,"directives",{ClosePopup:w["a"]})}}]);